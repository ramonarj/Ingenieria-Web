<!DOCTYPE html>
<html 
	xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
	<meta charset="utf-8">
	<title>Firefighter Space</title>
	<meta content="width=device-width, initial-scale=1" name="viewport" />
	<link rel="stylesheet" th:href="@{/css/Herramientas.css}" href="../static/css/Herramientas.css" type="text/css"/>
	<link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
	<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

</head>
<head th:replace="/fragments/toolbar.html :: head"></head>
<body>
	<nav th:replace="/fragments/toolbar.html :: body"></nav>
	
	<div class="tables">
		<div class="tableInfo" id="lanternTable">
			<table>
				<tr class="tipos">
					<th>Bombero</th>
					<th>Asignaci√≥n</th>
				</tr>
				<tr th:each="user: ${users}">
					<td th:text="${user.name}">Nombre</th>
					<td>					
							<span th:each="h: ${user.tools}" th:text="${h.type}">
							Herramienta
							</span>
					</td>
				</tr>
			</table>
		</div>
	</div>
	<div class="cambios">
	<h2>Cambiar herramienta</h2>
		<form class="smallform" th:action="@{/user/getUsersWithToolToChange}" method="GET">
			<h3>Herramienta que quieres ofrecer</h3>
			<select id="dropdownTools" name="myTool_id">
				<option th:each="tool: ${user.tools}" th:text="${tool.type}" th:value="${tool.id}" th:selected="${tool.id==session.herramienta1}">Usuario X</option>
	        </select>
			<h3>Herramienta que quieres recibir</h3>
			<select id="dropdownOtherTools" name="otherTool_id">
				<option th:each="h: ${herramientas}" th:text="${h.type}" th:value="${h.id}" th:selected="${h.id==session.herramienta2}">Usuario X</option>
	        </select>
			<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
			<button type="submit" id="buscaUsuarios" class="active">Buscar usuarios</button>
		</form>
		
		<form class="smallform" th:action="@{/user/cambiaHerramienta}" method="GET" id="pedirCambioForm">
			<h3>Usuarios disponibles</h3>
			<select id="dropdownUsers" name="user2_id">
				<option th:each="user: ${session.filteredUsersWithTools}" th:text="${user.name}" th:value="${user.id}">Usuario X</option>
	        </select>
			<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
			<button type="submit" id="pedirCambio" class="active">Pedir cambio</button>
	   </form>
	</div>
	<script src="https://code.jquery.com/jquery-3.3.1.js"></script>
	<script src="/js/Herramientas.js"></script>
</body>
</html>