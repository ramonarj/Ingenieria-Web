<!DOCTYPE html>
<html 
	xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
	<meta charset="utf-8">
	<meta content="width=device-width, initial-scale=1" name="viewport" />
	<title>Firefighter space</title>
	<link rel="stylesheet" th:href="@{/css/manageChanges.css}" href="../static/css/manageChanges.css" type="text/css"/>
	<link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
</head>
<head th:replace="/fragments/toolbar.html :: head"></head>
<body>
	<nav th:replace="/fragments/toolbar.html :: body"></nav>
	<div class="cambios">
		<table>
			<tr>
				<th></th>
				<th>Turnos</th>
				<th>Herramientas</th>
			</tr>
			<tr>
				<th>Propuestos</th>
				<td>
					<form class="smallform" th:action="@{/admin/resolveChange}" method="POST">
						<li th:each="cambio: ${session.cambiosPropuestos}">
							<b th:text="${cambio.user1.name}" />
							<i> (Día </i>
							<b th:text="${cambio.dia1.fecha}" />
							<i>) quiere cambiar con </i>
							<b th:text="${cambio.user2.name}"/>
							<i> (Día </i>
							<b th:text="${cambio.dia2.fecha}" />
							<i>) </i>
							<input type="hidden" th:name="cambio_id" th:value="${cambio.id}" />
							<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
							<button name="acceptButton" type="submit" class="">Aceptar</button>
							<button name="denyButton" type="submit" class="">Denegar</button>
						</li>
					</form>
				</td>
				<td>
					<form class="smallform" th:action="@{/admin/resolveToolChange}" method="POST">
						<li th:each="cambio: ${session.cambiosHerramientasPropuestos}">
							<b th:text="${cambio.user1.name}" />
							<i> (Herramienta </i>
							<b th:text="${cambio.tool1.type}" />
							<i>) quiere cambiar con </i>
							<b th:text="${cambio.user2.name}"/>
							<i> (Herramienta </i>
							<b th:text="${cambio.tool2.type}" />
							<i>) </i>
							<input type="hidden" th:name="cambio_id" th:value="${cambio.id}" />
							<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
							<button name="acceptButton" type="submit" class="">Aceptar</button>
							<button name="denyButton" type="submit" class="">Denegar</button>
						</li>
					</form>
				</td>
			</tr>
			<tr>
				<th>Aceptados</th>
				<td>
						<li th:each="cambio: ${session.cambiosAceptados}">
							<b th:text="${cambio.user1.name}"/>
							<i> (Día </i>
							<b th:text="${cambio.dia1.fecha}"/>
							<i>) quiere cambiar con </i>
							<b th:text="${cambio.user2.name}"/>
							<i> (Día </i>
							<b th:text="${cambio.dia2.fecha}"/>
							<i>) </i>
							<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
						</li>
				</td>
				<td>
						<li th:each="cambio: ${session.cambiosHerramientasAceptados}">
							<b th:text="${cambio.user1.name}"/>
							<i> (Herramienta </i>
							<b th:text="${cambio.tool1.type}"/>
							<i>) ha cambiado con </i>
							<b th:text="${cambio.user2.name}"/>
							<i> (Herramienta </i>
							<b th:text="${cambio.tool2.type}"/>
							<i>) </i>
							<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
						</li>
				</td>
			</tr>
			<tr>
				<th>Denegados</th>
				<td>
						<li th:each="cambio: ${session.cambiosDenegados}">
							<b th:text="${cambio.user1.name}" />
							<i> (Día </i>
							<b th:text="${cambio.dia1.fecha}" />
							<i>) quiere cambiar con </i>
							<b th:text="${cambio.user2.name}"/>
							<i> (Día </i>
							<b th:text="${cambio.dia2.fecha}" />
							<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
							<i>) </i>
						</li>
				</td>
				<td>
					<ul>
						<li th:each="cambio: ${session.cambiosHerramientasDenegados}">
							<b th:text="${cambio.user1.name}" />
							<i> (Herramienta </i>
							<b th:text="${cambio.tool1.type}" />
							<i>) no ha cambiado con </i>
							<b th:text="${cambio.user2.name}"/>
							<i> (Herramienta </i>
							<b th:text="${cambio.tool2.type}" />
							<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
							<i>) </i>
						</li>
					</ul>
				</td>
			</tr>
		</table>
	</div>
</body>
</html>